package {	import flash.system.*;	import flash.net.*;	import flash.external.*;	import flash.display.*;	import flash.events.*;	import fl.transitions.easing.*;	import fl.transitions.Tween;	public class ShopbeamWidget extends MovieClip {		public function ShopbeamWidget() {      			var SHOP_HERE_TWEEN_X: int = 180;			var SHOP_HERE_INITIAL_X: int = hoverMovie.x;			var bagActive: Sprite = hoverMovie.bagActive;			var bagInactive: Sprite = hoverMovie.bagInactive;			hoverArea.addEventListener(MouseEvent.MOUSE_OVER, function(event:MouseEvent):void {			var tweenActiveAlpha: Tween = new Tween(bagActive, "alpha", Strong.easeOut, bagActive.alpha, 1, 30);			var tweenInactiveAlpha: Tween = new Tween(bagInactive, "alpha", Strong.easeOut, bagInactive.alpha, 0, 30);      var tweenBackdropAlpha: Tween = new Tween(backdrop, "alpha", Strong.easeOut, backdrop.alpha, 0.6, 30);			var tweenHoverMovieX: Tween = new Tween(hoverMovie, "x", Strong.easeOut, hoverMovie.x, SHOP_HERE_TWEEN_X, 30);			});			hoverArea.addEventListener(MouseEvent.MOUSE_OUT, function(event:MouseEvent):void {			var tweenActiveAlpha: Tween = new Tween(bagActive, "alpha", Strong.easeOut, bagActive.alpha, 0, 1, true);			var tweenInactiveAlpha: Tween = new Tween(bagInactive, "alpha", Strong.easeOut, bagInactive.alpha, 1, 1, true);      var tweenBackdropAlpha: Tween = new Tween(backdrop, "alpha", Strong.easeOut, backdrop.alpha, 0, 30);			var tweenHoverMovieX: Tween = new Tween(hoverMovie, "x", Strong.easeOut, hoverMovie.x, SHOP_HERE_INITIAL_X, 1, true);			});      			function log(): void {				ExternalInterface.call('console.log', arguments.join(' '));			}			function logError(): void {				ExternalInterface.call('console.error', arguments.join(' '));			}			function executeJS(js): void {				var wrapped = 'try {\n' + js + '\n}catch(err){console.error(err);console.error(err.stack);}';				ExternalInterface.call('eval', wrapped);			}			Security.allowDomain('*');			var widgetUuid: String = stage.loaderInfo.parameters.widgetUuid;			var loader: Loader = new Loader();			var widgetData: Object;			ExternalInterface.addCallback('setWidgetData', function setWidgetData(data: Object): void {			        widgetData = data;			      });			stage.align = StageAlign.TOP_LEFT;      stage.scaleMode = StageScaleMode.NO_SCALE;			var button: Sprite = new Sprite();      button.addChild(loader);      button.buttonMode = true;      button.useHandCursor = true;      addChild(button);						setChildIndex(button, 0);			function loadingError(e: IOErrorEvent): void {				logError('widget with id: ' + widgetUuid + ' failed to load image');			}			loader.contentLoaderInfo.addEventListener(IOErrorEvent.IO_ERROR, loadingError);			function doneLoad(e: Event): void {				loader.contentLoaderInfo.removeEventListener(Event.COMPLETE, doneLoad);				loader.contentLoaderInfo.removeEventListener(IOErrorEvent.IO_ERROR, loadingError);			}			loader.contentLoaderInfo.addEventListener(Event.COMPLETE, doneLoad);			function loaderClickHandler(e: Event): void {				log('widgetOpenLightbox' + widgetUuid);				executeJS("Shopbeam.swfOpenLightbox('" + widgetUuid + "')");			}			loader.addEventListener(MouseEvent.CLICK, loaderClickHandler);			log('loading image: ' + stage.loaderInfo.parameters.imageUrl);			loader.load(new URLRequest(stage.loaderInfo.parameters.imageUrl));		}	}}